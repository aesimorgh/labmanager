{% extends "base_user_panel.html" %}
{% block title %}پزشک‌ها{% endblock %}

{% block head_extra %}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .table thead th{ background:#0d6efd; color:#fff; vertical-align:middle; white-space:nowrap; }
    .filter .form-control{ height:36px; padding-top:2px; padding-bottom:2px; }
    .btn-chip{ border-radius:9999px; }
  </style>
{% endblock %}

{% block subtabs %}
  <ul class="nav nav-pills mb-3">
    <li class="nav-item"><a class="nav-link" href="{% url 'billing:financial_home' %}">مالی</a></li>
    <li class="nav-item"><span class="nav-link active">پزشک‌ها</span></li>
  </ul>
{% endblock %}

{% block content %}
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">لیست پزشک‌ها</div>
    <div class="card-body">

      <!-- جستجو -->
      <form method="get" class="row g-2 align-items-end filter mb-3">
        <div class="col-md-6">
          <label class="form-label small">جستجو بر اساس نام</label>
          <input type="text" name="q" value="{{ q }}" class="form-control" placeholder="مثلاً: دکتر احمدی">
        </div>
        <div class="col-md-3 d-flex gap-2">
          <button class="btn btn-primary flex-grow-1">جستجو</button>
          <a class="btn btn-outline-secondary" href="{% url 'billing:doctor_list' %}">حذف فیلتر</a>
        </div>
      </form>

      <!-- جدول -->
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead>
            <tr>
              <th style="width:90px;">#</th>
              <th>نام پزشک</th>
              <th style="width:200px;">اقدامات</th>
            </tr>
          </thead>
          <tbody>
            {% if doctors %}
              {% for d in doctors %}
                <tr>
                  <td>{{ forloop.counter }}</td>
                  <td>{{ d.name|default:"—" }}</td>
                  <td>
                    <a class="btn btn-sm btn-outline-primary btn-chip"
                       href="{% url 'billing:doctor_account' d.id %}">
                      مشاهده حساب
                    </a>
                  </td>
                </tr>
              {% endfor %}
            {% else %}
              <tr>
                <td colspan="3" class="text-center text-muted py-4">هیچ پزشکی یافت نشد.</td>
              </tr>
            {% endif %}
          </tbody>
        </table>
      </div>

    </div>
  </div>
{% endblock %}
